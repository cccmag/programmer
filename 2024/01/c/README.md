# GCC 工具鏈用法

    本文為 ChatGPT 撰寫，經《陳鍾誠》校閱修改
    prompt : 請寫一篇 1000 字的 gcc 工具鏈用法


GCC（GNU Compiler Collection）是一個開源的編程語言編譯器套件，被廣泛用於開發各種不同類型的軟體。它支援多種語言，包括C、C++、Fortran、Objective-C、Ada等。GCC工具鏈由多個工具組成，可以執行編譯、連接和調試等操作。在這篇文章中，我們將著重介紹GCC工具鏈的常用用法。

## 編譯程式碼

GCC的最基本用法是用於編譯程式碼。可以使用`gcc`命令來將C或C++程式碼編譯成可執行檔。例如，要編譯名為`hello.c`的C程式碼，可以執行以下命令：

```
gcc -o hello hello.c
```

這將會將`hello.c`編譯成可執行檔`hello`。`-o`選項用於指定輸出檔名。

如果需要編譯C++程式碼，只需將檔案名後綴更改為`.cpp`，如`hello.cpp`，然後使用相同的`gcc`命令編譯。

除了基本的編譯外，GCC還支援許多其他選項和參數，可以用來控制編譯行為。例如，可以使用`-Wall`選項來開啟所有警告信息，或使用`-O2`選項來優化程式碼。可以通過查閱GCC的官方文件來了解詳細的選項和參數。

## 靜態連接

GCC不僅可以編譯程式碼，還可以將多個目標文件鏈接在一起，生成最終的可執行檔。這個過程稱為連接。GCC使用`ld`作為連接器，可以通過`gcc`命令進行連接。

例如，假設我們有一個名為`hello.o`的目標文件，我們可以使用以下命令將它連接成可執行檔：

```
gcc -o hello hello.o
```

連接時，GCC會自動尋找所需的庫文件並進行連接。如果需要使用其他庫文件，可以使用`-l`選項指定。例如，要連接`libm`庫文件，可以使用以下命令：

```
gcc -o hello hello.o -lm
```

注意，`-l`選項後面跟著的是庫文件的名稱，不需要指定文件後綴。

## 動態連接

除了靜態連接，GCC還支援動態連接。動態連接意味著執行檔不包含完整的庫代碼，而是在運行時從指定的庫文件中加載代碼。動態連接可以減少可執行檔的大小，並允許不同的程式共享相同的庫。

要執行動態連接，需要使用`-shared`選項來生成共享庫文件。例如，假設我們有一個名為`libhello.c`的C程式碼，可以使用以下命令將它編譯成共享庫：

```
gcc -shared -o libhello.so libhello.c
```

這將會生成名為`libhello.so`的共享庫文件。`-shared`選項用於指定生成共享庫。

在連接時，需要使用`-l`選項指定共享庫文件的名稱。例如，要連接名為`libhello.so`的共享庫，可以使用以下命令：

```
gcc -o hello hello.o -L. -lhello
```

其中，`-L`選項用於指定庫文件搜索路徑。在這個例子中，使用`.`表示當前目錄。`-l`選項後面跟著的是共享庫文件的名稱，不需要指定文件後綴。

## 調試程式

GCC還提供了用於調試程式的工具。其中最常用的是GDB（GNU Debugger），它是一個功能強大的調試器，可以用於追蹤程式的執行和檢查變數的值。

要使用GDB調試程式，需要將`-g`選項添加到編譯命令中。例如，要調試名為`hello.c`的程式碼，可以使用以下命令：

```
gcc -g -o hello hello.c
```

這將會生成帶有調試信息的可執行檔`hello`。然後，可以使用以下命令啟動GDB：

```
gdb hello
```

在GDB中，可以使用各種命令來控制程式的執行，例如`run`命令用於啟動程式，`break`命令用於設置斷點，`print`命令用於顯示變數的值，等等。可以通過查閱GDB的官方文件來了解更多的命令和用法。

綜上所述，我們介紹了GCC工具鏈的一些常用用法，包括編譯程式碼、靜態連接、動態連接和調試程式。這只是GCC的一部分功能，它還有更多強大的特性可以用於不同的開發需求。如有需要，建議查閱GCC的官方文件以獲取更詳細的信息和指導。